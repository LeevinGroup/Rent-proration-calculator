<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Simple Rent Proration (30-day Month)</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        line-height: 1.5;
      }
      h1 {
        margin-bottom: 0.5em;
      }
      h2 {
        margin-top: 1.2em;
        margin-bottom: 0.3em;
      }
      .section {
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 16px;
      }
      label {
        display: block;
        margin-top: 6px;
      }
      input[type="number"] {
        width: 120px;
        padding: 4px;
        margin-top: 2px;
      }
      button {
        margin-top: 8px;
        padding: 6px 10px;
        cursor: pointer;
      }
      .result {
        margin-top: 8px;
        padding: 8px;
        background: #f5f5f5;
        border-radius: 4px;
        font-family: Consolas, monospace;
        white-space: pre-wrap;
      }
      small {
        color: #555;
      }
    </style>
  </head>
  <body>
    <h1>Simple Rent Proration Calculator</h1>
    <p>
      Daily rent is always calculated as monthly rent ÷ 30. Only show multiple
      month options if the period crosses months.
    </p>

    <!-- Check In Proportional -->
    <div class="section">
      <h2>Check In Proportional</h2>
      <label
        >Monthly Rent:
        <input type="number" id="ciRent" placeholder="e.g. 1500" />
      </label>
      <label
        >From day (1 - 31):
        <input type="number" id="ciFrom" min="1" max="31" />
      </label>
      <label
        >To day (1 - 31):
        <input type="number" id="ciTo" min="1" max="31" />
      </label>
      <small>If To < From, it will be treated as next month.</small>
      <br />
      <button onclick="calcCheckIn()">Calculate</button>
      <div id="ciResult" class="result"></div>
    </div>

    <!-- Early Check Out -->
    <div class="section">
      <h2>Early Check Out</h2>
      <label
        >Monthly Rent:
        <input type="number" id="eoRent" placeholder="e.g. 1500" />
      </label>
      <label
        >From billing day (1 - 31):
        <input type="number" id="eoFrom" min="1" max="31" />
      </label>
      <label
        >Early check-out day (1 - 31):
        <input type="number" id="eoTo" min="1" max="31" />
      </label>
      <small
        >If check-out day < From day, the period will cross into the next
        month.</small
      >
      <br />
      <button onclick="calcEarlyOut()">Calculate</button>
      <div id="eoResult" class="result"></div>
    </div>

    <script>
      function calcDaysCrossMonth(from, to, monthDays) {
        if (to >= from) {
          return to - from + 1;
        } else {
          // Adjust days if from is beyond the month length
          if (from > monthDays) return null;
          return monthDays - from + 1 + to;
        }
      }

      function formatMonthResults(rent, from, to) {
        const daily = rent / 30;
        const monthLengths = [
          { label: "28-day", days: 28, maxFrom: 28 },
          { label: "30-day", days: 30, maxFrom: 30 },
          { label: "31-day", days: 31, maxFrom: 31 },
        ];

        let output = "";
        monthLengths.forEach((month) => {
          if (from > month.maxFrom) return; // skip if from day exceeds month
          let days = calcDaysCrossMonth(from, to, month.days);
          if (days === null) return; // skip invalid
          let amount = daily * days;
          output += `${month.label}: ${days} days → ${amount.toFixed(2)}   `;
        });

        return output;
      }

      function calcCheckIn() {
        const rent = parseFloat(document.getElementById("ciRent").value);
        const from = parseInt(document.getElementById("ciFrom").value, 10);
        const to = parseInt(document.getElementById("ciTo").value, 10);
        const resDiv = document.getElementById("ciResult");
        resDiv.textContent = "";

        if (isNaN(rent) || rent <= 0) {
          resDiv.textContent = "Please enter a valid monthly rent.";
          return;
        }
        if (isNaN(from) || isNaN(to)) {
          resDiv.textContent = "Please enter valid From and To days.";
          return;
        }

        const daily = rent / 30;
        let text = `Check In Proportional:\nMonthly Rent: ${rent.toFixed(
          2
        )}\nDaily Rent: ${daily.toFixed(
          4
        )}\nPeriod: day ${from} to day ${to}\n`;

        if (to >= from) {
          const days = to - from + 1;
          const amount = days * daily;
          text += `Number of days: ${days}\nProportional Amount: ${amount.toFixed(
            2
          )}`;
        } else {
          text += formatMonthResults(rent, from, to);
        }

        resDiv.textContent = text;
      }

      function calcEarlyOut() {
        const rent = parseFloat(document.getElementById("eoRent").value);
        const from = parseInt(document.getElementById("eoFrom").value, 10);
        const to = parseInt(document.getElementById("eoTo").value, 10);
        const resDiv = document.getElementById("eoResult");
        resDiv.textContent = "";

        if (isNaN(rent) || rent <= 0) {
          resDiv.textContent = "Please enter a valid monthly rent.";
          return;
        }
        if (isNaN(from) || isNaN(to)) {
          resDiv.textContent = "Please enter valid From and To days.";
          return;
        }

        const daily = rent / 30;
        let text = `Early Check Out:\nMonthly Rent: ${rent.toFixed(
          2
        )}\nDaily Rent: ${daily.toFixed(
          4
        )}\nPeriod: day ${from} to day ${to}\n`;

        if (to >= from) {
          const days = to - from + 1;
          const amount = days * daily;
          text += `Number of days: ${days}\nProportional Amount: ${amount.toFixed(
            2
          )}`;
        } else {
          text += formatMonthResults(rent, from, to);
        }

        resDiv.textContent = text;
      }
    </script>
  </body>
</html>
