<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Simple Rent Proration Calculator</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        line-height: 1.5;
      }
      h1 {
        margin-bottom: 0.5em;
      }
      h2 {
        margin-top: 1.2em;
        margin-bottom: 0.3em;
      }
      .section {
        border: 1px solid #ccc;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 16px;
      }
      label {
        display: block;
        margin-top: 6px;
      }
      input[type="number"],
      input[type="date"] {
        width: 160px;
        padding: 4px;
        margin-top: 2px;
      }
      button {
        margin-top: 8px;
        padding: 6px 10px;
        cursor: pointer;
      }
      .result {
        margin-top: 8px;
        padding: 8px;
        background: #f5f5f5;
        border-radius: 4px;
        font-family: Consolas, monospace;
        white-space: pre-wrap;
      }
      small {
        color: #555;
      }
    </style>
  </head>
  <body>
    <h1>Simple Rent Proration Calculator</h1>
    <p>Daily rent is always calculated as monthly rent ÷ 30.</p>

    <!-- Check In Proportional -->
    <div class="section">
      <h2>Check In Proportional</h2>
      <label
        >Monthly Rent:
        <input type="number" id="ciRent" placeholder="e.g. 1500" />
      </label>
      <label
        >Start Date:
        <input type="date" id="ciStart" />
      </label>
      <label
        >End Date:
        <input type="date" id="ciEnd" />
      </label>
      <small
        >If the end date is before the start date, it will be treated as next
        month.</small
      >
      <br />
      <button onclick="calcCheckIn()">Calculate</button>
      <div id="ciResult" class="result"></div>
    </div>

    <!-- Early Check Out -->
    <div class="section">
      <h2>Early Check Out</h2>
      <label
        >Monthly Rent:
        <input type="number" id="eoRent" placeholder="e.g. 1500" />
      </label>
      <label
        >Start Date:
        <input type="date" id="eoStart" />
      </label>
      <label
        >End Date:
        <input type="date" id="eoEnd" />
      </label>
      <small
        >If the end date is before the start date, it will be treated as next
        month.</small
      >
      <br />
      <button onclick="calcEarlyOut()">Calculate</button>
      <div id="eoResult" class="result"></div>
    </div>

    <script>
      function calculateDays(startDate, endDate) {
        if (!startDate || !endDate) return null;
        const start = new Date(startDate);
        const end = new Date(endDate);

        // If end < start, assume next month/year
        if (end < start) {
          end.setMonth(end.getMonth() + 1);
        }

        const diffMs = end - start;
        const days = Math.ceil(diffMs / (1000 * 60 * 60 * 24)) + 1; // inclusive
        return days;
      }

      function calcCheckIn() {
        const rent = parseFloat(document.getElementById("ciRent").value);
        const startDate = document.getElementById("ciStart").value;
        const endDate = document.getElementById("ciEnd").value;
        const resDiv = document.getElementById("ciResult");
        resDiv.textContent = "";

        if (isNaN(rent) || rent <= 0) {
          resDiv.textContent = "Please enter a valid monthly rent.";
          return;
        }

        const days = calculateDays(startDate, endDate);
        if (days === null) {
          resDiv.textContent = "Please enter valid start and end dates.";
          return;
        }

        const daily = rent / 30;
        const amount = daily * days;

        let text = `Check In Proportional:\n`;
        text += `Daily Rent: ${daily.toFixed(2)}€\n`;
        text += `Number of days: ${days}\n`;
        text += `Proportional Amount: ${amount.toFixed(2)}€`;

        resDiv.textContent = text;
      }

      function calcEarlyOut() {
        const rent = parseFloat(document.getElementById("eoRent").value);
        const startDate = document.getElementById("eoStart").value;
        const endDate = document.getElementById("eoEnd").value;
        const resDiv = document.getElementById("eoResult");
        resDiv.textContent = "";

        if (isNaN(rent) || rent <= 0) {
          resDiv.textContent = "Please enter a valid monthly rent.";
          return;
        }

        const days = calculateDays(startDate, endDate);
        if (days === null) {
          resDiv.textContent = "Please enter valid start and end dates.";
          return;
        }

        const daily = rent / 30;
        const amount = daily * days;

        let text = `Early Check Out:\n`;
        text += `Daily Rent: ${daily.toFixed(2)}€\n`;
        text += `Number of days: ${days}\n`;
        text += `Proportional Amount: ${amount.toFixed(2)}€`;

        resDiv.textContent = text;
      }
    </script>
  </body>
</html>
